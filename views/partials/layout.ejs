<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title><%= typeof title !== 'undefined' ? title : 'Mon application' %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <!-- Navigation bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4">
    <a class="navbar-brand" href="/">Application de gestion</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="/">Accueil</a></li>
        <% if (!user) { %>
          <li class="nav-item"><a class="nav-link" href="/auth-ui/vue/login">Connexion</a></li>
        <% } else { %>
          <li class="nav-item"><a class="nav-link" href="/dashboard-ui/vue">Tableau de bord</a></li>
          <li class="nav-item"><a class="nav-link" href="/clients-ui/vue">Clients</a></li>
          <li class="nav-item"><a class="nav-link" href="/adresses-ui/vue">Adresses</a></li>
          <li class="nav-item"><a class="nav-link" href="/livraisons-ui/vue">Livraisons</a></li>
          <li class="nav-item"><a class="nav-link" href="/utilisateurs-ui/vue">Utilisateurs</a></li>

          <!-- ✅ Liens visibles uniquement pour les admins -->
          <% if (user.role === 1) { %>
            <li class="nav-item"><a class="nav-link" href="/roles-ui/vue">Rôles</a></li>
            <li class="nav-item"><a class="nav-link" href="/statuts-ui/vue">Statuts</a></li>
          <% } %>
        <% } %>
      </ul>
      <% if (user) { %>
        <span class="navbar-text me-3 text-white">
          Bienvenue <%= user.email %> (rôle: <%= user.role %>)
        </span>
        <a href="/auth-ui/vue/logout" class="btn btn-danger">Déconnexion</a>
      <% } %>
    </div>
  </nav>

  <!-- Contenu des pages -->
  <main class="container mt-4">
    <%- body %>
  </main>

  <footer class="text-center mt-5 mb-3 text-muted">
    © 2025 - Mon application
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>